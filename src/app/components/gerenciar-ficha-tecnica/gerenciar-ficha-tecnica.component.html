<app-header-voltar texto="Gerenciar Ficha TÃ©cnica"></app-header-voltar>
<div class="container" [ngClass]="{'com-equipe': equipes.length > 0}">

  <div class="caixa">
    <div class="caixa-mensagem" style="margin: 16px 0">
      <p class="nenhuma-equipe" *ngIf="equipes.length === 0">Nenhuma equipe adicionada ainda.</p>
      <button class="botao-adicionar-equipe" (click)="criarFicha()">
        Adicionar Equipe
      </button>
    </div>

    <mat-accordion multi class="accordion">
      <mat-expansion-panel
        *ngFor="let equipe of equipes"
        (opened)="carregarMembros(equipe.id)"
      >
        <mat-expansion-panel-header>
          <mat-panel-title>{{ equipe.nome }}</mat-panel-title>
        </mat-expansion-panel-header>

        <div *ngIf="membrosPorEquipe[equipe.id]?.length;">
          <ul >
            <li *ngFor="let membro of membrosPorEquipe[equipe.id]" class="lista-membros" style="list-style-type: none; width: 100%">
              <div class="caixa-perfil">
                <img
                  src="../../../assets/icons/perfil-sem-foto.png"
                  alt="Foto do membro"
                />
                <p class="text-muted">{{ membro.nome }} - {{ membro.cargo }}</p>
              </div>
              <div class="acoes-membros">
                <button
                (click)="editarMembro(membro)"
              >
                <img class="editar-ref" src="../../../assets/icons/editar-ref.png" alt="">
              </button>
              <button
                class="remover-membro"
                (click)="removerMembro(membro)"
              >
                <img class="excluir-ref" src="../../../assets/icons/image.png" alt="">
              </button>
              </div>
              
            </li>
          </ul>
        </div>
        <div class="caixa-botoes">
          <div>
            <button class="remover-equipe" (click)="deletarEquipe(equipe.id)">
              Remover Equipe
            </button>
          </div>
          
          <div>
            <button
              class="adicionar-membro"
              color="primary"
              (click)="adicionarMembro(equipe.id)"
            >
              Adicionar Membro
            </button>
          </div>
        </div>
          
        
      </mat-expansion-panel>
    </mat-accordion>
  </div>
</div>
